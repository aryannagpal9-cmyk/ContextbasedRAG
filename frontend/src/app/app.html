<div class="app-container">
  <!-- Sidebar -->
  <div class="sidebar">
    <header>
      <h1><i class="fa-solid fa-microchip"></i> Ultra Doc-AI</h1>
      <p style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 5px;">Cognitive Logistics Extraction</p>
    </header>

    <app-upload-zone></app-upload-zone>

    <div style="margin-top: auto;">
      <div
        style="display: flex; align-items: center; gap: 10px; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 0.75rem; border: 1px solid var(--glass-border);">
        <div [class.status-ready]="documentId$ | async" [class.status-processing]="!(documentId$ | async)"
          style="width: 10px; height: 10px; border-radius: 50%;"></div>
        <div style="font-size: 0.85rem;">
          <div style="color: var(--text-secondary);">System Status</div>
          <div style="font-weight: 700;">{{ (documentId$ | async) ? 'Ready for Analysis' : 'Awaiting Document' }}</div>
          <div *ngIf="documentId$ | async" style="font-size: 0.75rem; opacity: 0.7; margin-top: 4px;">
            ID: {{ getTruncatedId(documentId$ | async) }} â€¢ {{ chunksCount$ | async }} Chunks
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Panel -->
  <div class="main-content">
    <!-- Tabs -->
    <div class="tabs">
      <button class="tab-btn" [class.active]="activeTab === 'chat'" (click)="setActiveTab('chat')">
        <i class="fa-solid fa-message"></i> Cognitive Chat
      </button>
      <button class="tab-btn" [class.active]="activeTab === 'extraction'" (click)="setActiveTab('extraction')">
        <i class="fa-solid fa-database"></i> Structured Data
      </button>
      <button class="tab-btn" [class.active]="activeTab === 'chunks'" (click)="setActiveTab('chunks')">
        <i class="fa-solid fa-layer-group"></i> Semantic Chunks
      </button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content" [class.active]="activeTab === 'chat'">
      <app-chat-interface
        style="display: flex; flex: 1; flex-direction: column; overflow: hidden;"></app-chat-interface>
    </div>

    <div class="tab-content" [class.active]="activeTab === 'extraction'">
      <app-extraction-view
        style="display: flex; flex: 1; flex-direction: column; overflow: hidden;"></app-extraction-view>
    </div>

    <div class="tab-content" [class.active]="activeTab === 'chunks'">
      <app-document-chunks
        style="display: flex; flex: 1; flex-direction: column; overflow: hidden;"></app-document-chunks>
    </div>

    <!-- Global Processing Overlay -->
    <div class="processing-overlay" [class.active]="isProcessing$ | async">
      <div class="spinner"></div>
      <div style="font-weight: 700; font-size: 1.25rem;">Extracting Intelligence...</div>
      <div style="color: var(--text-secondary);">Parsing layout and embedding semantic vectors</div>
    </div>
  </div>
</div>